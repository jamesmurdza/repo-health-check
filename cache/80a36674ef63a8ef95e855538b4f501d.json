{"total_count": 1, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/nodejs/node/issues/44579", "repository_url": "https://api.github.com/repos/nodejs/node", "labels_url": "https://api.github.com/repos/nodejs/node/issues/44579/labels{/name}", "comments_url": "https://api.github.com/repos/nodejs/node/issues/44579/comments", "events_url": "https://api.github.com/repos/nodejs/node/issues/44579/events", "html_url": "https://github.com/nodejs/node/pull/44579", "id": 1367286060, "node_id": "PR_kwDOAZ7xs84-ppxK", "number": 44579, "title": "buffer: revert GetBackingStore optimization in API", "user": {"login": "kvakil", "id": 22647613, "node_id": "MDQ6VXNlcjIyNjQ3NjEz", "avatar_url": "https://avatars.githubusercontent.com/u/22647613?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kvakil", "html_url": "https://github.com/kvakil", "followers_url": "https://api.github.com/users/kvakil/followers", "following_url": "https://api.github.com/users/kvakil/following{/other_user}", "gists_url": "https://api.github.com/users/kvakil/gists{/gist_id}", "starred_url": "https://api.github.com/users/kvakil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kvakil/subscriptions", "organizations_url": "https://api.github.com/users/kvakil/orgs", "repos_url": "https://api.github.com/users/kvakil/repos", "events_url": "https://api.github.com/users/kvakil/events{/privacy}", "received_events_url": "https://api.github.com/users/kvakil/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 155267414, "node_id": "MDU6TGFiZWwxNTUyNjc0MTQ=", "url": "https://api.github.com/repos/nodejs/node/labels/buffer", "name": "buffer", "color": "f7c6c7", "default": false, "description": "Issues and PRs related to the buffer subsystem."}, {"id": 155267502, "node_id": "MDU6TGFiZWwxNTUyNjc1MDI=", "url": "https://api.github.com/repos/nodejs/node/labels/c++", "name": "c++", "color": "e11d21", "default": false, "description": "Issues and PRs that require attention from people who are familiar with C++."}, {"id": 1057120897, "node_id": "MDU6TGFiZWwxMDU3MTIwODk3", "url": "https://api.github.com/repos/nodejs/node/labels/needs-ci", "name": "needs-ci", "color": "82abe5", "default": false, "description": "PRs that need a full CI run."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2022-09-09T04:53:15Z", "updated_at": "2025-05-02T00:01:48Z", "closed_at": null, "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/nodejs/node/pulls/44579", "html_url": "https://github.com/nodejs/node/pull/44579", "diff_url": "https://github.com/nodejs/node/pull/44579.diff", "patch_url": "https://github.com/nodejs/node/pull/44579.patch", "merged_at": null}, "body": "In an earlier PR, I replaced a lot of instances of `GetBackingStore()->Data()` with `Data()`. Apparently these two are not equivalent in the case of zero-length buffers: the former returns a \"valid\" address, while the latter returns `NULL`. At least one library in the ecosystem (see the referenced issue) abuses zero-length buffers to wrap arbitrary pointers, which is broken by this difference. It is unfortunate that every library needs to take a performance hit because of this edge-case, and somebody should figure out if this is actually a reasonable contract to uphold long-term.\r\n\r\nI have not traced down exactly why this divergence occurs, but I have verified that reverting this line fixes the referenced issue.\r\n\r\nRefs: https://github.com/nodejs/node/pull/44080\r\nFixes: https://github.com/nodejs/node/issues/44554", "reactions": {"url": "https://api.github.com/repos/nodejs/node/issues/44579/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nodejs/node/issues/44579/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]}